/*! angular-pageslide-directive 2016-05-13 */
angular.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function(a,b){return{restrict:"EAC",transclude:!1,scope:{psOpen:"=?",psAutoClose:"=?",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psZindex:"@",psSqueeze:"@",psCloak:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@",psClickOutside:"@"},link:function(c,d,e){function f(a){o&&!m.contains(a.target)&&(o=!1,c.psOpen=!1,c.$apply()),c.psOpen&&(o=!0)}function g(a){if(k.bodyClass){var b=k.className+"-body",c=new RegExp(" "+b+"-closed| "+b+"-open");n.className=n.className.replace(c,""),n.className+=" "+b+"-"+a}}function h(b,d){if(b&&0!==b.style.width)switch(l.css("display","none"),d.side){case"right":b.style.width="0px",d.squeeze&&(n.style.right="0px"),d.push&&(n.style.right="0px",n.style.left="0px");break;case"left":b.style.width="0px",d.squeeze&&(n.style.left="0px"),d.push&&(n.style.left="0px",n.style.right="0px");break;case"top":b.style.height="0px",d.squeeze&&(n.style.top="0px"),d.push&&(n.style.top="0px",n.style.bottom="0px");break;case"bottom":b.style.height="0px",d.squeeze&&(n.style.bottom="0px"),d.push&&(n.style.bottom="0px",n.style.top="0px")}c.psOpen=!1,d.keyListener&&a.off("keydown",j),d.clickOutside&&a.off("click",f),o=!1,g("closed")}function i(d,e){if(0!==d.style.width){switch(e.side){case"right":d.style.width=e.size,e.squeeze&&(n.style.right=e.size),e.push&&(n.style.right=e.size,n.style.left="-"+e.size);break;case"left":d.style.width=e.size,e.squeeze&&(n.style.left=e.size),e.push&&(n.style.left=e.size,n.style.right="-"+e.size);break;case"top":d.style.height=e.size,e.squeeze&&(n.style.top=e.size),e.push&&(n.style.top=e.size,n.style.bottom="-"+e.size);break;case"bottom":d.style.height=e.size,e.squeeze&&(n.style.bottom=e.size),e.push&&(n.style.bottom=e.size,n.style.top="-"+e.size)}b(function(){l.css("display","block")},1e3*e.speed),c.psOpen=!0,e.keyListener&&a.on("keydown",j),e.clickOutside&&a.on("click",f),g("open")}}function j(a){var b=27,c=a.keyCode||a.which;c===b&&h(m,k)}var k={};k.side=c.psSide||"right",k.speed=c.psSpeed||"0.5",k.size=c.psSize||"300px",k.zindex=c.psZindex||1e3,k.className=c.psClass||"ng-pageslide",k.squeeze=Boolean(c.psSqueeze)||!1,k.push=Boolean(c.psPush)||!1,k.container=c.psContainer||!1,k.keyListener=Boolean(c.psKeyListener)||!1,k.bodyClass=c.psBodyClass||!1,k.clickOutside=c.psClickOutside===!1?!1:!0,d.addClass(k.className);var l,m,n;n=k.container?document.getElementById(k.container):document.body;var o=!1;if(g("closed"),m=d[0],"div"!==m.tagName.toLowerCase()&&"pageslide"!==m.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===m.children.length)throw new Error("You have to content inside the <pageslide>");switch(l=angular.element(m.children),n.appendChild(m),m.style.zIndex=k.zindex,m.style.position=k.container!==!1?"absolute":"fixed",m.style.width=0,m.style.height=0,m.style.transitionDuration=k.speed+"s",m.style.webkitTransitionDuration=k.speed+"s",m.style.transitionProperty="width, height",k.squeeze&&(n.style.position="absolute",n.style.transitionDuration=k.speed+"s",n.style.webkitTransitionDuration=k.speed+"s",n.style.transitionProperty="top, bottom, left, right"),k.side){case"right":m.style.height=e.psCustomHeight||"100%",m.style.top=e.psCustomTop||"0px",m.style.bottom=e.psCustomBottom||"0px",m.style.right=e.psCustomRight||"0px";break;case"left":m.style.height=e.psCustomHeight||"100%",m.style.top=e.psCustomTop||"0px",m.style.bottom=e.psCustomBottom||"0px",m.style.left=e.psCustomLeft||"0px";break;case"top":m.style.width=e.psCustomWidth||"100%",m.style.left=e.psCustomLeft||"0px",m.style.top=e.psCustomTop||"0px",m.style.right=e.psCustomRight||"0px";break;case"bottom":m.style.width=e.psCustomWidth||"100%",m.style.bottom=e.psCustomBottom||"0px",m.style.left=e.psCustomLeft||"0px",m.style.right=e.psCustomRight||"0px"}c.$watch("psOpen",function(a){a?i(m,k):h(m,k)}),c.$watch("psSize",function(a,b){b!==a&&(k.size=a,i(m,k))}),c.$on("$destroy",function(){m.parentNode===n&&(k.clickOutside&&a.off("click",f),n.removeChild(m))}),c.psAutoClose&&(c.$on("$locationChangeStart",function(){h(m,k)}),c.$on("$stateChangeStart",function(){h(m,k)}))}}}]);