/*! angular-pageslide-directive 2016-11-10 */
!function(a,b){"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof module&&module.exports?module.exports=b(require("angular")):b(a.angular)}(this,function(a){a.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function(b,c){return{restrict:"EA",transclude:!1,scope:{psOpen:"=?",psAutoClose:"@",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psZindex:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@",psClickOutside:"@",onopen:"=?",onclose:"=?"},link:function(d,e,f){c(function(){function f(a){q&&!o.contains(a.target)&&(q=!1,d.psOpen=!1,d.$apply()),d.psOpen&&(q=!0)}function g(a){if(m.bodyClass){var b=m.className+"-body",c=new RegExp(" "+b+"-closed| "+b+"-open");p.className=p.className.replace(c,""),p.className+=" "+b+"-"+a}}function h(){d.psOpen?"function"==typeof d.onopen&&d.onopen():"function"==typeof d.onclose&&d.onclose()}function i(){switch(m.side){case"right":o.style.width=m.size,o.style.height="100%",o.style.top="0px",o.style.bottom="0px",o.style.right="0px";break;case"left":o.style.width=m.size,o.style.height="100%",o.style.top="0px",o.style.bottom="0px",o.style.left="0px";break;case"top":o.style.height=m.size,o.style.width="100%",o.style.left="0px",o.style.top="0px",o.style.right="0px";break;case"bottom":o.style.height=m.size,o.style.width="100%",o.style.bottom="0px",o.style.left="0px",o.style.right="0px"}}function j(a,c){switch(c.side){case"right":a.style.right="-"+c.size,c.push&&(p.style.right="0px",p.style.left="0px");break;case"left":a.style.left="-"+c.size,c.push&&(p.style.left="0px",p.style.right="0px");break;case"top":a.style.top="-"+c.size,c.push&&(p.style.top="0px",p.style.bottom="0px");break;case"bottom":a.style.bottom="-"+c.size,c.push&&(p.style.bottom="0px",p.style.top="0px")}c.keyListener&&b.off("keydown",l),c.clickOutside&&b.off("touchend click",f),q=!1,g("closed"),d.psOpen=!1}function k(a,c){switch(c.side){case"right":a.style.right="0px",c.push&&(p.style.right=c.size,p.style.left="-"+c.size);break;case"left":a.style.left="0px",c.push&&(p.style.left=c.size,p.style.right="-"+c.size);break;case"top":a.style.top="0px",c.push&&(p.style.top=c.size,p.style.bottom="-"+c.size);break;case"bottom":a.style.bottom="0px",c.push&&(p.style.bottom=c.size,p.style.top="-"+c.size)}d.psOpen=!0,c.keyListener&&b.on("keydown",l),c.clickOutside&&b.on("touchend click",f),g("open")}function l(a){var b=27,e=a.keyCode||a.which;e===b&&(j(o,m),c(function(){d.$apply()}))}var m={};m.side=d.psSide||"right",m.speed=d.psSpeed||"0.5",m.size=d.psSize||"300px",m.zindex=d.psZindex||1e3,m.className=d.psClass||"ng-pageslide",m.push="true"===d.psPush,m.container=d.psContainer||!1,m.keyListener="true"===d.psKeyListener,m.bodyClass=d.psBodyClass||!1,m.clickOutside="false"!==d.psClickOutside,m.push=m.push&&!m.container,e.addClass(m.className);var n,o,p,q=!1;if(p=m.container?document.getElementById(m.container):document.body,g("closed"),o=e[0],"div"!==o.tagName.toLowerCase()&&"pageslide"!==o.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===o.children.length)throw new Error("You need to have content inside the <pageslide>");n=a.element(o.children),p.appendChild(o),o.style.zIndex=m.zindex,o.style.position="fixed",o.style.transitionDuration=m.speed+"s",o.style.webkitTransitionDuration=m.speed+"s",o.style.height=m.size,o.style.transitionProperty="top, bottom, left, right",m.push&&(p.style.position="absolute",p.style.transitionDuration=m.speed+"s",p.style.webkitTransitionDuration=m.speed+"s",p.style.transitionProperty="top, bottom, left, right"),m.container&&(o.style.position="absolute",p.style.position="relative",p.style.overflow="hidden"),o.addEventListener("transitionend",h),i(),d.$watch("psOpen",function(a){a?k(o,m):j(o,m)}),d.$watch("psSize",function(a,b){b!==a&&(m.size=a,i())}),d.$on("$destroy",function(){o.parentNode===p&&(m.clickOutside&&b.off("touchend click",f),p.removeChild(o)),o.removeEventListener("transitionend",h)}),d.psAutoClose&&(d.$on("$locationChangeStart",function(){j(o,m)}),d.$on("$stateChangeStart",function(){j(o,m)}))})}}}])});