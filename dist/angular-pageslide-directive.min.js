/*! angular-pageslide-directive 2016-02-20 */
angular.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function(a,b){return{restrict:"EAC",transclude:!1,scope:{psOpen:"=?",psAutoClose:"=?",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psSqueeze:"@",psCloak:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@"},link:function(c,d,e){function f(a){if(j.bodyClass){var b=j.className+"-body",c=new RegExp(" "+b+"-closed| "+b+"-open");m.className=m.className.replace(c,""),m.className+=" "+b+"-"+a}}function g(b,d){if(b&&0!==b.style.width)switch(d.cloak&&k.css("display","none"),d.side){case"right":b.style.width="0px",d.squeeze&&(m.style.right="0px"),d.push&&(m.style.right="0px",m.style.left="0px");break;case"left":b.style.width="0px",d.squeeze&&(m.style.left="0px"),d.push&&(m.style.left="0px",m.style.right="0px");break;case"top":b.style.height="0px",d.squeeze&&(m.style.top="0px"),d.push&&(m.style.top="0px",m.style.bottom="0px");break;case"bottom":b.style.height="0px",d.squeeze&&(m.style.bottom="0px"),d.push&&(m.style.bottom="0px",m.style.top="0px")}c.psOpen=!1,d.keyListener&&a.off("keydown",i),f("closed")}function h(d,e){if(0!==d.style.width){switch(e.side){case"right":d.style.width=e.size,e.squeeze&&(m.style.right=e.size),e.push&&(m.style.right=e.size,m.style.left="-"+e.size);break;case"left":d.style.width=e.size,e.squeeze&&(m.style.left=e.size),e.push&&(m.style.left=e.size,m.style.right="-"+e.size);break;case"top":d.style.height=e.size,e.squeeze&&(m.style.top=e.size),e.push&&(m.style.top=e.size,m.style.bottom="-"+e.size);break;case"bottom":d.style.height=e.size,e.squeeze&&(m.style.bottom=e.size),e.push&&(m.style.bottom=e.size,m.style.top="-"+e.size)}b(function(){e.cloak&&k.css("display","block")},1e3*e.speed),c.psOpen=!0,e.keyListener&&a.on("keydown",i),f("open")}}function i(a){var b=27,c=a.keyCode||a.which;c===b&&g(l,j)}var j={};j.side=c.psSide||"right",j.speed=c.psSpeed||"0.5",j.size=c.psSize||"300px",j.zindex=1e3,j.className=c.psClass||"ng-pageslide",j.cloak=c.psCloak&&"false"==c.psCloak.toLowerCase()?!1:!0,j.squeeze=Boolean(c.psSqueeze)||!1,j.push=Boolean(c.psPush)||!1,j.container=c.psContainer||!1,j.keyListener=Boolean(c.psKeyListener)||!1,j.bodyClass=c.psBodyClass||!1,d.addClass(j.className);var k=null,l=null,m=j.container?document.getElementById(j.container):document.body;if(f("closed"),l=d[0],"div"!==l.tagName.toLowerCase()&&"pageslide"!==l.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===l.children.length)throw new Error("You have to content inside the <pageslide>");switch(k=angular.element(l.children),m.appendChild(l),l.style.zIndex=j.zindex,l.style.position=j.container!==!1?"absolute":"fixed",l.style.width=0,l.style.height=0,l.style.overflow="hidden",l.style.transitionDuration=j.speed+"s",l.style.webkitTransitionDuration=j.speed+"s",l.style.transitionProperty="width, height",(j.squeeze||j.push)&&(m.style.position="absolute",m.style.transitionDuration=j.speed+"s",m.style.webkitTransitionDuration=j.speed+"s",m.style.transitionProperty="top, bottom, left, right",m.style.overflow="hidden"),j.side){case"right":l.style.height=e.psCustomHeight||"100%",l.style.top=e.psCustomTop||"0px",l.style.bottom=e.psCustomBottom||"0px",l.style.right=e.psCustomRight||"0px";break;case"left":l.style.height=e.psCustomHeight||"100%",l.style.top=e.psCustomTop||"0px",l.style.bottom=e.psCustomBottom||"0px",l.style.left=e.psCustomLeft||"0px";break;case"top":l.style.width=e.psCustomWidth||"100%",l.style.left=e.psCustomLeft||"0px",l.style.top=e.psCustomTop||"0px",l.style.right=e.psCustomRight||"0px";break;case"bottom":l.style.width=e.psCustomWidth||"100%",l.style.bottom=e.psCustomBottom||"0px",l.style.left=e.psCustomLeft||"0px",l.style.right=e.psCustomRight||"0px"}c.$watch("psOpen",function(a){a?h(l,j):g(l,j)}),c.$watch("psSize",function(a,b){b!==a&&(j.size=a,h(l,j))}),c.$on("$destroy",function(){m.removeChild(l)}),c.psAutoClose&&(c.$on("$locationChangeStart",function(){g(l,j)}),c.$on("$stateChangeStart",function(){g(l,j)}))}}}]);