/*! angular-pageslide-directive 2016-04-05 */
angular.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function(a,b){return{restrict:"EAC",transclude:!1,scope:{psOpen:"=?",psAutoClose:"=?",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psZindex:"@",psSqueeze:"=?",psCloak:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@"},link:function(c,d,e){function f(a){if(l.bodyClass){var b=l.className+"-body",c=new RegExp(" "+b+"-closed| "+b+"-open");o.className=o.className.replace(c,""),o.className+=" "+b+"-"+a}}function g(b,d){if(b&&0!==b.style.width)switch(m.css("display","none"),d.side){case"right":b.style.width="0px",c.psSqueeze&&(o.style.right="0px"),d.push&&(o.style.right="0px",o.style.left="0px");break;case"left":b.style.width="0px",c.psSqueeze&&(o.style.left="0px"),d.push&&(o.style.left="0px",o.style.right="0px");break;case"top":b.style.height="0px",c.psSqueeze&&(o.style.top="0px"),d.push&&(o.style.top="0px",o.style.bottom="0px");break;case"bottom":b.style.height="0px",c.psSqueeze&&(o.style.bottom="0px"),d.push&&(o.style.bottom="0px",o.style.top="0px")}c.psOpen=!1,d.keyListener&&a.off("keydown",i),f("closed")}function h(d,e){if(0!==d.style.width){switch(e.side){case"right":d.style.width=e.size,c.psSqueeze&&(o.style.right=e.size),e.push&&(o.style.right=e.size,o.style.left="-"+e.size);break;case"left":d.style.width=e.size,c.psSqueeze&&(o.style.left=e.size),e.push&&(o.style.left=e.size,o.style.right="-"+e.size);break;case"top":d.style.height=e.size,c.psSqueeze&&(o.style.top=e.size),e.push&&(o.style.top=e.size,o.style.bottom="-"+e.size);break;case"bottom":d.style.height=e.size,c.psSqueeze&&(o.style.bottom=e.size),e.push&&(o.style.bottom=e.size,o.style.top="-"+e.size)}b(function(){m.css("display","block")},1e3*e.speed),c.psOpen=!0,e.keyListener&&a.on("keydown",i),f("open")}}function i(a){var b=27,c=a.keyCode||a.which;c===b&&g(n,l)}function j(){o.style.position="absolute",o.style.transitionDuration=l.speed+"s",o.style.webkitTransitionDuration=l.speed+"s",o.style.transitionProperty="top, bottom, left, right",c.psOpen&&h(n,l),c.psSqueeze=!0}function k(){o.style.position="",o.style.transitionDuration="",o.style.webkitTransitionDuration="",o.style.transitionProperty="",o.style.left="",o.style.right="",o.style.top="",o.style.bottom="",c.psSqueeze=!1}var l={};l.side=c.psSide||"right",l.speed=c.psSpeed||"0.5",l.size=c.psSize||"300px",l.zindex=c.psZindex||1e3,l.className=c.psClass||"ng-pageslide",l.push=Boolean(c.psPush)||!1,l.container=c.psContainer||!1,l.keyListener=Boolean(c.psKeyListener)||!1,l.bodyClass=c.psBodyClass||!1,d.addClass(l.className);var m=null,n=null,o=l.container?document.getElementById(l.container):document.body;if(f("closed"),n=d[0],"div"!==n.tagName.toLowerCase()&&"pageslide"!==n.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===n.children.length)throw new Error("You have to content inside the <pageslide>");switch(m=angular.element(n.children),o.appendChild(n),n.style.zIndex=l.zindex,n.style.position=l.container!==!1?"absolute":"fixed",n.style.width=0,n.style.height=0,n.style.transitionDuration=l.speed+"s",n.style.webkitTransitionDuration=l.speed+"s",n.style.transitionProperty="width, height",l.side){case"right":n.style.height=e.psCustomHeight||"100%",n.style.top=e.psCustomTop||"0px",n.style.bottom=e.psCustomBottom||"0px",n.style.right=e.psCustomRight||"0px";break;case"left":n.style.height=e.psCustomHeight||"100%",n.style.top=e.psCustomTop||"0px",n.style.bottom=e.psCustomBottom||"0px",n.style.left=e.psCustomLeft||"0px";break;case"top":n.style.width=e.psCustomWidth||"100%",n.style.left=e.psCustomLeft||"0px",n.style.top=e.psCustomTop||"0px",n.style.right=e.psCustomRight||"0px";break;case"bottom":n.style.width=e.psCustomWidth||"100%",n.style.bottom=e.psCustomBottom||"0px",n.style.left=e.psCustomLeft||"0px",n.style.right=e.psCustomRight||"0px"}c.$watch("psOpen",function(a){a?h(n,l):g(n,l)}),c.$watch("psSqueeze",function(a){a?j():k()}),c.$watch("psSize",function(a,b){b!==a&&(l.size=a,h(n,l))}),c.$on("$destroy",function(){n.parentNode===o&&o.removeChild(n)}),c.psAutoClose&&(c.$on("$locationChangeStart",function(){g(n,l)}),c.$on("$stateChangeStart",function(){g(n,l)}))}}}]);